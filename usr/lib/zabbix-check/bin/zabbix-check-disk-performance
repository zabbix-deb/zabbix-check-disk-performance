#!/bin/bash

function devname() {
  device=$1
  cd /dev/disk/by-id/
  if [ -e "dm-name-$device"  ]; then
    ls -al dm-name-$device | awk '{print $11}' | cut -c 7-
  else
    echo $device
  fi
}

opt=$1
dev=$(devname $2)

case $opt in
  read.ops)
    awk '{print $1}' /sys/class/block/$dev/stat
    ;;

  read.merged)
    awk '{print $2}' /sys/class/block/$dev/stat
    ;;

  read.sectors)
    awk '{print $3}' /sys/class/block/$dev/stat
    ;;

  read.ms)
    awk '{print $4}' /sys/class/block/$dev/stat
    ;;

  write.ops)
    awk '{print $5}' /sys/class/block/$dev/stat
    ;;

  write.merged)
    awk '{print $6}' /sys/class/block/$dev/stat
    ;;

  write.sectors)
    awk '{print $7}' /sys/class/block/$dev/stat
    ;;

  write.ms)
    awk '{print $8}' /sys/class/block/$dev/stat
    ;;

  io.active)
    awk '{print $9}' /sys/class/block/$dev/stat
    ;;

  io.ms)
    awk '{print $10}' /sys/class/block/$dev/stat
    ;;

  weight.io.ms)
    awk '{print $11}' /sys/class/block/$dev/stat
    ;;

  *)
    echo 0
    exit 1
esac
exit 0


